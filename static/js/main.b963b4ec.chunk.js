(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{131:function(e,t,n){e.exports=n.p+"static/media/wQ.4e4432a6.svg"},132:function(e,t,n){e.exports=n.p+"static/media/wR.57350123.svg"},133:function(e,t,n){e.exports=n.p+"static/media/wB.e0eb761a.svg"},134:function(e,t,n){e.exports=n.p+"static/media/wN.f9c6e522.svg"},135:function(e,t){var n=Object({NODE_ENV:"production",PUBLIC_URL:"/blockchess",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).CONTRACT_NAME||"chess.testnet";e.exports=function(e){switch(e){case"mainnet":return{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",contractName:n,walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org"};case"production":case"development":case"testnet":return{networkId:"default",nodeUrl:"https://rpc.testnet.near.org",contractName:n,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org"};case"betanet":return{networkId:"betanet",nodeUrl:"https://rpc.betanet.near.org",contractName:n,walletUrl:"https://wallet.betanet.near.org",helperUrl:"https://helper.betanet.near.org"};case"local":return{networkId:"local",nodeUrl:"http://localhost:3030",keyPath:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/blockchess",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).HOME,"/.near/validator_key.json"),walletUrl:"http://localhost:4000/wallet",contractName:n};case"test":case"ci":return{networkId:"shared-test",nodeUrl:"https://rpc.ci-testnet.near.org",contractName:n,masterAccount:"test.near"};case"ci-betanet":return{networkId:"shared-test-staging",nodeUrl:"https://rpc.ci-betanet.near.org",contractName:n,masterAccount:"test.near"};default:throw Error("Unconfigured environment '".concat(e,"'. Can be configured in src/config.js."))}}},140:function(e,t,n){e.exports=n(235)},168:function(e,t){},174:function(e,t){},190:function(e,t){},192:function(e,t){},210:function(e,t){},234:function(e,t,n){},235:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n.n(a),o=n(137),c=n(123),l=n(0),s=n.n(l),i=n(18),u=n.n(i),m=n(39),p=(n(84),n(124)),d=n.n(p),f=n(261),h=n(253),g=n(260);function w(){return s.a.createElement(h.a,{variant:"body1",gutterBottom:!0},"TODO: Some content when the user is not signed in")}var b=n(256),E=n(129),v=n.n(E),O=n(131),C=n.n(O),k=n(132),S=n.n(k),y=n(133),U=n.n(y),j=n(134),N=n.n(j),T=n(5),_=Object(b.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",textAlign:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),x=function(e){var t=e.currentUser,n=e.nearConfig,a=e.wallet,r=Object(l.useState)(new d.a),o=Object(m.a)(r,1)[0],c=Object(l.useState)(),i=Object(m.a)(c,2),u=i[0],p=i[1],b=Object(l.useState)(!1),E=Object(m.a)(b,2),O=E[0],k=E[1],y=Object(l.useState)(""),j=Object(m.a)(y,2),x=j[0],I=j[1],A=Object(l.useState)(),B=Object(m.a)(A,2),D=B[0],M=B[1],P=_();Object(l.useEffect)((function(){}),[]);var K=function(){var e=o.moves({verbose:!0}),t=e[Math.floor(Math.random()*e.length)];e.length>0&&(o.move(t.san),I(o.fen()),M([t.from,t.to]))},L=function(e){var t=u[0],n=u[1];o.move({from:t,to:n,promotion:e}),I(o.fen()),M([t,n]),k(!1),setTimeout(K,500)};return s.a.createElement(s.a.Fragment,null,t?s.a.createElement(f.a,{variant:"contained",color:"secondary",style:{float:"right"},onClick:function(){a.signOut(),window.location.replace(window.location.origin+window.location.pathname)}},"Log out"):s.a.createElement(f.a,{variant:"contained",color:"secondary",style:{float:"right"},onClick:function(){a.requestSignIn(n.contractName,"NEAR Guest Book")}},"Log in"),s.a.createElement(h.a,{variant:"h2",component:"h2",gutterBottom:!0},"BlockChess"),t?s.a.createElement(s.a.Fragment,null,s.a.createElement(T.c,null,s.a.createElement(T.a,{exact:!0,path:"/"},"TODO: create game homepage"),s.a.createElement(T.a,{path:"/:id"},s.a.createElement(s.a.Fragment,null,s.a.createElement(v.a,{turnColor:"w"===o.turn()?"white":"black",lastMove:D,fen:x,onMove:function(e,t){for(var n=o.moves({verbose:!0}),a=0,r=n.length;a<r;a++)if(-1!==n[a].flags.indexOf("p")&&n[a].from===e)return p([e,t]),void k(!0);o.move({from:e,to:t,promotion:"x"})&&(I(o.fen()),M([e,t]),setTimeout(K,500))},style:{margin:"auto"}}),s.a.createElement(g.a,{open:O,className:P.modal,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},s.a.createElement("div",{className:P.paper},s.a.createElement("span",{role:"presentation",onClick:function(){return L("q")}},s.a.createElement("img",{src:C.a,alt:"",style:{width:50}})),s.a.createElement("span",{role:"presentation",onClick:function(){return L("r")}},s.a.createElement("img",{src:S.a,alt:"",style:{width:50}})),s.a.createElement("span",{role:"presentation",onClick:function(){return L("b")}},s.a.createElement("img",{src:U.a,alt:"",style:{width:50}})),s.a.createElement("span",{role:"presentation",onClick:function(){return L("n")}},s.a.createElement("img",{src:N.a,alt:"",style:{width:50}})))))))):s.a.createElement(w,null))},I=n(135),A=n.n(I),B=n(259),D=n(258),M=n(257),P=n(136),K=Object(P.a)({palette:{type:"dark",primary:{main:"#202020"},secondary:{main:"#1de9b6"},error:{main:M.a.A400}}}),L=n(48),R=n(78);n(233),n(234);function W(){return(W=Object(c.a)(r.a.mark((function e(){var t,n,a,c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=A()("production"),e.next=3,L.connect(Object(o.a)({deps:{keyStore:new L.keyStores.BrowserLocalStorageKeyStore}},t));case 3:if(n=e.sent,!(a=new L.WalletConnection(n)).getAccountId()){e.next=11;break}return e.t0=a.getAccountId(),e.next=9,a.account().state();case 9:e.t1=e.sent.amount,c={accountId:e.t0,balance:e.t1};case 11:return e.next=13,new L.Contract(a.account(),t.contractName,{viewMethods:["getBoardState"],changeMethods:["createGame","acceptChallenge","makeMove"],sender:a.getAccountId()});case 13:return l=e.sent,e.abrupt("return",{contract:l,currentUser:c,nearConfig:t,walletConnection:a});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.nearInitPromise=function(){return W.apply(this,arguments)}().then((function(e){var t=e.contract,n=e.currentUser,a=e.nearConfig,r=e.walletConnection;u.a.render(s.a.createElement(D.a,{theme:K},s.a.createElement(B.a,null),s.a.createElement(R.a,null,s.a.createElement(x,{contract:t,currentUser:n,nearConfig:a,wallet:r}))),document.getElementById("root"))}))}},[[140,1,2]]]);
//# sourceMappingURL=main.b963b4ec.chunk.js.map